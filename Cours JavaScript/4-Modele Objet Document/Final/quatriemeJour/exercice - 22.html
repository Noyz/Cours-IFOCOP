<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>JavaScript & DOM : Le Modèle Objet du Document - Exercice 22</title>
    <style type="text/css"> 
    .erreur {
       background-color:white;
      text-decoration: underline;
      font-weight: bold;
      height:40px;
      width:200px;
      border:1px solid red;
      color : red;
      font-size : 15px;
    }
    </style>
    <script>
      //Énoncé :

      /*
        Créez un formulaire avec un champ de saisie et un bouton submit. L'attribut action du formulaire sera : http://www.google.com, l'attribut method sera : GET.
      */

      /*
        1. A la soumission du formulaire (évènement onsubmit spécifique au éléments HTML de type form), afficher dans une boite de dialogue la valeur saisie dans le champ de saisie du formulaire. (l'attribut correspondant à la valeur du champ porte le même nom que la propriété de l'objet correspondant en mémoire).
      */
      /*window.onload = function(){
        window.document.addEventListener('onsubmit', saisie(), false);
        function saisie (){
          var caseNom = document.getElementById('something').value;
          alert(caseNom);
          console.log(caseNom);
         
        };
      };*/
      /*
        2. A la soumission du formulaire, SI le champ est vide, je crée une élément HTML de type p avec la class erreur et je l'ajoute dans le document en dessous du formulaire et j'empêche le formulaire d'être envoyé par le navigateur Internet.
      */

    window.onload = function (){ 
      var variable = 1;
      document.addEventListener('submit', envoieFailed, false); 
      function envoieFailed(ev){
        ev;
        var user = document.getElementById('champsText').value;
        var formulair = document.getElementById('forme'); 
        if(user == ''){
          if(variable){                                
            var nouveauP = document.createElement("p");
            nouveauP.className = ('erreur');
            nouveauP.innerHTML = "Erreur, rien n'a été saisie;";
            var attach = formulair.appendChild(nouveauP);
            variable = 1; 
            ev.preventDefault();         
          }

        }else {
          variable = 0;
        }
      };
    };
     
       

      /*
        Astuce : Si dans un gestionnaire d'évènement (fonction/méthode associée à l'événement), j'exécute la méthode .preventDefault() de l'objet d'évènement, le navigateur Internet ne poursuit pas le comportement par défaut associé à l'événement. Cette méthode est documentée sur le MDN ici : https://developer.mozilla.org/fr/docs/Web/API/Event/preventDefault
      */
    </script>
  </head>
  <body>
    <h1>Titre principal</h1> 
    <ul>
      <li>Premier point</li>
      <li>Deuxième point</li>
      <li>Troisième point</li>
    </ul>
    <form method="GET" action="http://www.google.fr" id="forme">
      <input type="text" name="something" id="champsText" value="Enter something"/>
      <input type="submit" value="Touche moi!!!!!" id ="submit" />
      </form>
    <div>
      <div>
        <h2><span>1</span>. Titre de la première section</h2>
        <p><span>1.1</span>. Premier paragraphe de la première section et un <a href="#">lien</a>.</p>
        <p><span>1.2</span>. Deuxième paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
      </div>
      <div>
        <h2><span>2</span>. Titre de la deuxième section</h2>
        <p><span>2.1</span>. Premier paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
        <p><span>2.2</span>. Deuxième paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
      </div>
      <div>
        <h2><span>3</span>. Titre de la troisième section</h2>
        <p><span>3.1</span>. Premier paragraphe de la troisième section et un <a href="#">lien</a>.</p>
        <p><span>3.2</span>. Deuxième paragraphe de la troisième section et un <a href="#">lien</a>.</p>
      </div>
    </div>
  </body>
</html>